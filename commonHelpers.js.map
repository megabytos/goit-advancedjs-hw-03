{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.headers.common['x-api-key'] = 'live_dqzx9gGAsy51dR76MW9oEWTcXRgRll8obeNyIbK5hMBfq7RtotA3JTBEj9B0oO9c';\naxios.defaults.baseURL = 'https://api.thecatapi.com/v1';\n\nexport function fetchBreeds() {\n  return axios.get(`breeds`);\n}\n\nexport function fetchCatByBreed(breedId) {\n  return axios.get(`images/search?breed_ids=${breedId}`);\n}","import { fetchBreeds, fetchCatByBreed } from './cat-api';\nimport slimSelect from 'slim-select';\nimport 'slim-select/styles';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  container: document.querySelector('.cat-info'),\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n};\nconst showElement = elm => refs[elm].classList.remove('visually-hidden');\nconst hideElement = elm => refs[elm].classList.add('visually-hidden');\n\nconst showBreedsList = _ => {\n  showElement('loader');\n  hideElement('select');\n  fetchBreeds()\n    .then(({ data }) => {\n      const breeds = data.map(({ id, name }) => ({ text: name, value: id }));\n      new slimSelect({\n        select: '.breed-select',\n        placeholder: 'Select a breed',\n        searchPlaceholder: 'Search a breed',\n        data: breeds,\n        events: {\n          afterChange: selected => showBreed(selected[0].value),\n        },\n      });\n      showElement('select');\n    })\n    .catch(error => {\n      iziToast.error({ title: 'Error', message: error.message, position: 'center' });\n    })\n    .finally(() => {\n      hideElement('loader');\n    });\n\n  const showBreed = breedId => {\n    hideElement('container');\n    showElement('loader');\n    fetchCatByBreed(breedId)\n      .then(response => {        \n        if (!response.data) {\n          throw new Error('Empty response');\n        }\n        if (!response.data[0].breeds) {\n          throw new Error('Empty breeds data');\n        }\n        if (!response.data[0].breeds.length) {\n          throw new Error('Breed not found');\n        }\n        const data = response.data[0].breeds[0];\n        if (response.data[0].url) data.url = response.data[0].url;\n        drawBreedInfo(data);\n      })\n      .catch(error => {\n        iziToast.error({ title: 'Error', message: error.message, position: 'center' });\n      })\n      .finally(() => {\n        hideElement('loader');\n      });\n  };\n};\n\nconst drawBreedInfo = data => {\n  refs.container.innerHTML = `\n      <img src=\"${data.url}\" alt=\"${data.name}\" />\n      <div>\n        <h2 class=\"title\">${data.name}</h2>\n        <p class=\"description\">${data.description}</p>\n        <p><strong>Temperament:</strong> ${data.temperament}</p>\n      </div>\n    `;\n  showElement('container');\n};\n\nshowBreedsList();"],"names":["axios","fetchBreeds","fetchCatByBreed","breedId","refs","showElement","elm","hideElement","showBreedsList","_","data","breeds","id","name","slimSelect","selected","showBreed","error","iziToast","response","drawBreedInfo"],"mappings":"owBACAA,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAI,wEAC7CA,EAAM,SAAS,QAAU,+BAElB,SAASC,GAAc,CAC5B,OAAOD,EAAM,IAAI,QAAQ,CAC3B,CAEO,SAASE,EAAgBC,EAAS,CACvC,OAAOH,EAAM,IAAI,2BAA2BG,CAAO,EAAE,CACvD,CCJA,MAAMC,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,UAAW,SAAS,cAAc,WAAW,EAC7C,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,CACxC,EACMC,EAAcC,GAAOF,EAAKE,CAAG,EAAE,UAAU,OAAO,iBAAiB,EACjEC,EAAcD,GAAOF,EAAKE,CAAG,EAAE,UAAU,IAAI,iBAAiB,EAE9DE,EAAiBC,GAAK,CAC1BJ,EAAY,QAAQ,EACpBE,EAAY,QAAQ,EACpBN,EAAa,EACV,KAAK,CAAC,CAAE,KAAAS,KAAW,CAClB,MAAMC,EAASD,EAAK,IAAI,CAAC,CAAE,GAAAE,EAAI,KAAAC,MAAY,CAAE,KAAMA,EAAM,MAAOD,CAAE,EAAG,EACrE,IAAIE,EAAW,CACb,OAAQ,gBACR,YAAa,iBACb,kBAAmB,iBACnB,KAAMH,EACN,OAAQ,CACN,YAAaI,GAAYC,EAAUD,EAAS,CAAC,EAAE,KAAK,CACrD,CACT,CAAO,EACDV,EAAY,QAAQ,CAC1B,CAAK,EACA,MAAMY,GAAS,CACdC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAM,QAAS,SAAU,QAAQ,CAAE,CACnF,CAAK,EACA,QAAQ,IAAM,CACbV,EAAY,QAAQ,CAC1B,CAAK,EAEH,MAAMS,EAAYb,GAAW,CAC3BI,EAAY,WAAW,EACvBF,EAAY,QAAQ,EACpBH,EAAgBC,CAAO,EACpB,KAAKgB,GAAY,CAChB,GAAI,CAACA,EAAS,KACZ,MAAM,IAAI,MAAM,gBAAgB,EAElC,GAAI,CAACA,EAAS,KAAK,CAAC,EAAE,OACpB,MAAM,IAAI,MAAM,mBAAmB,EAErC,GAAI,CAACA,EAAS,KAAK,CAAC,EAAE,OAAO,OAC3B,MAAM,IAAI,MAAM,iBAAiB,EAEnC,MAAMT,EAAOS,EAAS,KAAK,CAAC,EAAE,OAAO,CAAC,EAClCA,EAAS,KAAK,CAAC,EAAE,MAAKT,EAAK,IAAMS,EAAS,KAAK,CAAC,EAAE,KACtDC,EAAcV,CAAI,CAC1B,CAAO,EACA,MAAMO,GAAS,CACdC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAM,QAAS,SAAU,QAAQ,CAAE,CACrF,CAAO,EACA,QAAQ,IAAM,CACbV,EAAY,QAAQ,CAC5B,CAAO,CACP,CACA,EAEMa,EAAgBV,GAAQ,CAC5BN,EAAK,UAAU,UAAY;AAAA,kBACXM,EAAK,GAAG,UAAUA,EAAK,IAAI;AAAA;AAAA,4BAEjBA,EAAK,IAAI;AAAA,iCACJA,EAAK,WAAW;AAAA,2CACNA,EAAK,WAAW;AAAA;AAAA,MAGzDL,EAAY,WAAW,CACzB,EAEAG,EAAgB"}